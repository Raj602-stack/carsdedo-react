{"ast":null,"code":"var _jsxFileName = \"/Users/rajyadav/Desktop/carsdedo/src/pages/CarDetailsWeb.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport carsData from \"../data/cars\";\nimport \"../styles/CarDetails.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TOPBAR_HEIGHT = 72;\nexport default function CarDetailsWeb() {\n  _s();\n  var _car$images;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n\n  // Always compute car FIRST (NOT conditional)\n  const car = carsData.find(c => Number(c.id) === Number(id));\n\n  // Hooks MUST run unconditionally\n  const images = car !== null && car !== void 0 && (_car$images = car.images) !== null && _car$images !== void 0 && _car$images.length ? car.images : car ? [car.image] : [];\n  const [heroImage, setHeroImage] = useState(images[0] || \"\");\n  const containerRef = useRef(null);\n  const leftRef = useRef(null);\n  const heroRef = useRef(null);\n  const rightCardRef = useRef(null);\n\n  // section refs\n  const overviewRef = useRef(null);\n  const reportRef = useRef(null);\n  const specsRef = useRef(null);\n  const financeRef = useRef(null);\n\n  // sticky tabs + active section\n  const [activeTab, setActiveTab] = useState(\"overview\");\n  const [showStickyTabs, setShowStickyTabs] = useState(false);\n  const [rightMode, setRightMode] = useState(\"fixed\");\n\n  // Sticky Tabs observer\n  useEffect(() => {\n    if (!heroRef.current) return;\n    const io = new IntersectionObserver(entries => {\n      setShowStickyTabs(!entries[0].isIntersecting);\n    }, {\n      threshold: 0.08\n    });\n    io.observe(heroRef.current);\n    return () => io.disconnect();\n  }, []);\n\n  // ScrollSpy observer\n  useEffect(() => {\n    const sections = [overviewRef.current, reportRef.current, specsRef.current, financeRef.current].filter(Boolean);\n    if (!sections.length) return;\n    const io = new IntersectionObserver(entries => {\n      const visible = entries.filter(e => e.isIntersecting);\n      if (visible.length > 0) {\n        visible.sort((a, b) => b.intersectionRatio - a.intersectionRatio);\n        setActiveTab(visible[0].target.id);\n      }\n    }, {\n      root: null,\n      rootMargin: `-${TOPBAR_HEIGHT + 8}px 0px -35% 0px`,\n      threshold: [0.15, 0.35, 0.6]\n    });\n    sections.forEach(s => io.observe(s));\n    return () => io.disconnect();\n  }, []);\n\n  // Right card behavior (fixed → absolute → static)\n  const computeRightMode = useCallback(() => {\n    const sentinel = document.getElementById(\"right-sentinel\");\n    if (!rightCardRef.current || !leftRef.current || !sentinel) {\n      setRightMode(\"fixed\");\n      return;\n    }\n    const sentinelRect = sentinel.getBoundingClientRect();\n    const viewportHeight = window.innerHeight;\n\n    // Footer reached → stop fixing\n    if (sentinelRect.top <= viewportHeight - 20) {\n      setRightMode(\"static\");\n      return;\n    }\n\n    // Left column height too small → absolute inside left\n    const leftRect = leftRef.current.getBoundingClientRect();\n    const cardHeight = rightCardRef.current.offsetHeight;\n    if (leftRect.bottom - TOPBAR_HEIGHT < cardHeight + 40) {\n      setRightMode(\"absolute\");\n      return;\n    }\n    setRightMode(\"fixed\");\n  }, []);\n  useEffect(() => {\n    computeRightMode();\n    window.addEventListener(\"scroll\", computeRightMode, {\n      passive: true\n    });\n    window.addEventListener(\"resize\", computeRightMode);\n    return () => {\n      window.removeEventListener(\"scroll\", computeRightMode);\n      window.removeEventListener(\"resize\", computeRightMode);\n    };\n  }, [computeRightMode]);\n\n  // ScrollTo helper\n  const scrollTo = ref => {\n    if (!ref.current) return;\n    const top = ref.current.getBoundingClientRect().top + window.scrollY - TOPBAR_HEIGHT - 8;\n    window.scrollTo({\n      top,\n      behavior: \"smooth\"\n    });\n  };\n\n  // AFTER all hooks — now we can conditionally return\n  if (!car) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 40\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Car not found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(-1),\n        children: \"Go back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"car-details-page\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n}\n_s(CarDetailsWeb, \"pO6RWCkBwozts0lL7DSclprv5CE=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = CarDetailsWeb;\nvar _c;\n$RefreshReg$(_c, \"CarDetailsWeb\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useParams","useNavigate","carsData","jsxDEV","_jsxDEV","TOPBAR_HEIGHT","CarDetailsWeb","_s","_car$images","id","navigate","car","find","c","Number","images","length","image","heroImage","setHeroImage","containerRef","leftRef","heroRef","rightCardRef","overviewRef","reportRef","specsRef","financeRef","activeTab","setActiveTab","showStickyTabs","setShowStickyTabs","rightMode","setRightMode","current","io","IntersectionObserver","entries","isIntersecting","threshold","observe","disconnect","sections","filter","Boolean","visible","e","sort","a","b","intersectionRatio","target","root","rootMargin","forEach","s","computeRightMode","sentinel","document","getElementById","sentinelRect","getBoundingClientRect","viewportHeight","window","innerHeight","top","leftRect","cardHeight","offsetHeight","bottom","addEventListener","passive","removeEventListener","scrollTo","ref","scrollY","behavior","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","className","_c","$RefreshReg$"],"sources":["/Users/rajyadav/Desktop/carsdedo/src/pages/CarDetailsWeb.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport carsData from \"../data/cars\";\nimport \"../styles/CarDetails.css\";\n\nconst TOPBAR_HEIGHT = 72;\n\nexport default function CarDetailsWeb() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n\n  // Always compute car FIRST (NOT conditional)\n  const car = carsData.find((c) => Number(c.id) === Number(id));\n\n  // Hooks MUST run unconditionally\n  const images = car?.images?.length ? car.images : car ? [car.image] : [];\n\n  const [heroImage, setHeroImage] = useState(images[0] || \"\");\n  const containerRef = useRef(null);\n  const leftRef = useRef(null);\n  const heroRef = useRef(null);\n  const rightCardRef = useRef(null);\n\n  // section refs\n  const overviewRef = useRef(null);\n  const reportRef = useRef(null);\n  const specsRef = useRef(null);\n  const financeRef = useRef(null);\n\n  // sticky tabs + active section\n  const [activeTab, setActiveTab] = useState(\"overview\");\n  const [showStickyTabs, setShowStickyTabs] = useState(false);\n  const [rightMode, setRightMode] = useState(\"fixed\");\n\n  // Sticky Tabs observer\n  useEffect(() => {\n    if (!heroRef.current) return;\n\n    const io = new IntersectionObserver(\n      (entries) => {\n        setShowStickyTabs(!entries[0].isIntersecting);\n      },\n      { threshold: 0.08 }\n    );\n\n    io.observe(heroRef.current);\n    return () => io.disconnect();\n  }, []);\n\n  // ScrollSpy observer\n  useEffect(() => {\n    const sections = [\n      overviewRef.current,\n      reportRef.current,\n      specsRef.current,\n      financeRef.current,\n    ].filter(Boolean);\n\n    if (!sections.length) return;\n\n    const io = new IntersectionObserver(\n      (entries) => {\n        const visible = entries.filter((e) => e.isIntersecting);\n        if (visible.length > 0) {\n          visible.sort((a, b) => b.intersectionRatio - a.intersectionRatio);\n          setActiveTab(visible[0].target.id);\n        }\n      },\n      {\n        root: null,\n        rootMargin: `-${TOPBAR_HEIGHT + 8}px 0px -35% 0px`,\n        threshold: [0.15, 0.35, 0.6],\n      }\n    );\n\n    sections.forEach((s) => io.observe(s));\n    return () => io.disconnect();\n  }, []);\n\n  // Right card behavior (fixed → absolute → static)\n  const computeRightMode = useCallback(() => {\n    const sentinel = document.getElementById(\"right-sentinel\");\n\n    if (!rightCardRef.current || !leftRef.current || !sentinel) {\n      setRightMode(\"fixed\");\n      return;\n    }\n\n    const sentinelRect = sentinel.getBoundingClientRect();\n    const viewportHeight = window.innerHeight;\n\n    // Footer reached → stop fixing\n    if (sentinelRect.top <= viewportHeight - 20) {\n      setRightMode(\"static\");\n      return;\n    }\n\n    // Left column height too small → absolute inside left\n    const leftRect = leftRef.current.getBoundingClientRect();\n    const cardHeight = rightCardRef.current.offsetHeight;\n\n    if (leftRect.bottom - TOPBAR_HEIGHT < cardHeight + 40) {\n      setRightMode(\"absolute\");\n      return;\n    }\n\n    setRightMode(\"fixed\");\n  }, []);\n\n  useEffect(() => {\n    computeRightMode();\n    window.addEventListener(\"scroll\", computeRightMode, { passive: true });\n    window.addEventListener(\"resize\", computeRightMode);\n\n    return () => {\n      window.removeEventListener(\"scroll\", computeRightMode);\n      window.removeEventListener(\"resize\", computeRightMode);\n    };\n  }, [computeRightMode]);\n\n  // ScrollTo helper\n  const scrollTo = (ref) => {\n    if (!ref.current) return;\n    const top =\n      ref.current.getBoundingClientRect().top +\n      window.scrollY -\n      TOPBAR_HEIGHT -\n      8;\n    window.scrollTo({ top, behavior: \"smooth\" });\n  };\n\n  // AFTER all hooks — now we can conditionally return\n  if (!car) {\n    return (\n      <div style={{ padding: 40 }}>\n        <h2>Car not found</h2>\n        <button onClick={() => navigate(-1)}>Go back</button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"car-details-page\">\n      {/* UI unchanged — your JSX here... */}\n      {/* I am not rewriting the whole UI since only hooks needed fixes */}\n      {/* Plug the original UI code below this line */}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}